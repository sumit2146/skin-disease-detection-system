<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Disease AI - Smart Skin Disease Detection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body class="{% block body_class %}{% endblock %}">
    <nav class="navbar">
        <div class="container navbar-content">
            <a href="{{ url_for('main.index') }}" class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
                </svg>
                Skin Disease AI
            </a>
            <div class="nav-links">
                {% if current_user.is_authenticated %}
                {% if current_user.role == 'Admin' %}
                <a href="{{ url_for('main.admin_dashboard') }}" class="nav-link">Admin Dashboard</a>
                {% else %}
                <a href="{{ url_for('main.dashboard') }}" class="nav-link">Dashboard</a>
                <a href="{{ url_for('main.feedback') }}" class="nav-link">Feedback</a>
                {% endif %}
                <a href="{{ url_for('main.detect') }}" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10" />
                        <line x1="12" y1="8" x2="12" y2="16" />
                        <line x1="8" y1="12" x2="16" y2="12" />
                    </svg>
                    New Scan
                </a>
                <a href="{{ url_for('auth.logout') }}" class="nav-link">Logout</a>
                {% else %}
                <a href="{{ url_for('auth.login') }}" class="nav-link">Login</a>
                <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Get Started</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container" style="min-height: 80vh;">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <div class="alert">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Skin Disease AI. Advanced Dermatological Analysis.</p>
        </div>
    </footer>

    <script>
        // Simple script to handle file input change if present
        const fileInput = document.getElementById('file');
        const preview = document.getElementById('preview');

        if (fileInput) {
            fileInput.addEventListener('change', function (e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    }
                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // Drag and drop effects
            const dropZone = document.querySelector('.upload-area');
            if (dropZone) {
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropZone.addEventListener(eventName, highlight, false);
                });
                ['dragleave', 'drop'].forEach(eventName => {
                    dropZone.addEventListener(eventName, unhighlight, false);
                });

                function highlight(e) {
                    dropZone.classList.add('dragover');
                }
                function unhighlight(e) {
                    dropZone.classList.remove('dragover');
                }
            }
        }
    </script>
</body>

</html>